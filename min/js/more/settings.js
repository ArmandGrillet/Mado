/* Copyright (c) 2014 Armand Grillet.
See the license in the "About" section for further information. */
function determineCloseButton(){stylesheetLink.setAttribute("rel","stylesheet"),stylesheetLink.setAttribute("type","text/css"),navigator.appVersion.indexOf("Mac")>-1?(stylesheetLink.setAttribute("href","../css/more/more-frame-mac.css"),windowClose.setAttribute("class","cta little-icon-mac-close")):navigator.appVersion.indexOf("Win")>-1?(stylesheetLink.setAttribute("href","../css/more/more-frame-windows.css"),windowClose.setAttribute("class","cta little-icon-win-close")):(stylesheetLink.setAttribute("href","../css/more/more-frame-others.css"),windowClose.setAttribute("class","cta little-icon-chr-close")),head.appendChild(stylesheetLink)}function getAnalytics(){chrome.storage.local.get("analytics",function(a){a.analytics&&(analytics.checked=!0)})}function getSyntax(){chrome.storage.local.get("gfm",function(a){void 0!=a.gfm?a.gfm?gfmSyntax.checked=!0:markdownSyntax.checked=!0:(chrome.storage.local.set({gfm:!1}),markdownSyntax.checked=!0)})}function setAnalytics(){chrome.storage.local.set(analytics.checked?{analytics:!0}:{analytics:!1})}function setSyntax(){chrome.storage.local.set(markdownSyntax.checked?{gfm:!1}:{gfm:!0})}var head,stylesheetLink=document.createElement("link"),windowClose,markdownSyntax,gfmSyntax,smaDisplaySize,medDisplaySize,bigDisplaySize,viewOnResize,analytics;window.onload=function(){head=document.getElementsByTagName("head")[0],windowClose=document.getElementById("window-close"),markdownSyntax=document.getElementById("markdown-radio"),gfmSyntax=document.getElementById("gfm-radio"),highlightingCheck=document.getElementById("highlighting-checkbox"),smaDisplaySize=document.getElementById("small-display-radio"),medDisplaySize=document.getElementById("medium-display-radio"),bigDisplaySize=document.getElementById("big-display-radio"),bigInputContainer=document.getElementById("big-display-input-container"),bigLabelContainer=document.getElementById("big-display-label-container"),viewOnResize=document.getElementById("global-view-checkbox"),analytics=document.getElementById("analytics-checkbox"),determineCloseButton(),getSyntax(),getAnalytics(),$(markdownSyntax).on("click",setSyntax),$(gfmSyntax).on("click",setSyntax),$(analytics).on("click",setAnalytics),$(windowClose).on("click",function(){chrome.app.window.current().close()})};